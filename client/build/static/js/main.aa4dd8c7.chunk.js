(this["webpackJsonprecipe-ui"]=this["webpackJsonprecipe-ui"]||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var s=n(1),i=n(0),a=n.n(i),c=n(19),r=n.n(c),o=(n(72),n(10)),l=n(11),u=n(5),d=n(13),h=n(12),j=(n.p,n(73),n(18)),b=n(6),p=n.n(b),m=n(55),g=n(64),O=n(56),f=Object(O.a)();function x(){var e=Object(m.a)(["\n  margin-bottom: 10px\n"]);return x=function(){return e},e}var v=n(57).a.div(x()),y=function(e,t){p.a.post("api/recipes/find",{find:e}).then((function(e){console.log(e.data),t(e.data.map((function(e){return{value:e.name,label:e.name,id:e.id}})))}))},C=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(o.a)(this,n);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={inputValue:""},e.handleInputChange=function(t){var n=t.replace(/\W/g,"");return e.setState({inputValue:n}),n},e.handleSelect=function(e){console.log(e),window.location="/recipes/".concat(e.id)},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(s.jsx)(v,{children:Object(s.jsx)(g.a,{cacheOptions:!0,loadOptions:y,defaultOptions:!0,onInputChange:this.handleInputChange,onChange:this.handleSelect})})}}]),n}(i.Component),k=n(30),N=n(31),w=function(e){return Object(s.jsx)("div",{children:Object(s.jsx)("div",{class:"card",children:Object(s.jsxs)("div",{class:"card-body",children:[Object(s.jsxs)("h5",{class:"card-title",children:[e.recipe.name," ",Object(s.jsx)("a",{href:e.recipe.link,target:"_blank",children:Object(s.jsx)(k.a,{icon:N.a})})]}),Object(s.jsxs)("p",{class:"card-text",children:[" This recipe has ",e.recipe.ingredients.length," ingredients. ",e.recipe.time.total?"Cook time is "+e.recipe.time.total:null]}),Object(s.jsx)(j.b,{to:"/recipes/"+e.recipe._id,children:"Show Detail"})]})})})},S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).deleteRecipe=s.deleteRecipe.bind(Object(u.a)(s)),s.state={recipes:[]},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/api/recipes").then((function(t){e.setState({recipes:t.data})})).catch((function(e){console.log(e)}))}},{key:"deleteRecipe",value:function(e){p.a.delete("/api/recipes/"+e).then((function(e){console.log(e.data)})),this.setState({recipes:this.state.recipes.filter((function(t){return t._id!==e}))})}},{key:"recipeList",value:function(){var e=this;return this.state.recipes.map((function(t){return Object(s.jsx)(w,{recipe:t,deleteRecipe:e.deleteRecipe},t._id)}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("h3",{children:["Recipes  ",Object(s.jsx)(j.b,{to:"/add",children:"Add"})]}),Object(s.jsx)(C,{}),this.recipeList()]})}}]),n}(i.Component),I=n(106),R=n(107),U=n(108),L=n(34),D=n.n(L),q=function(e){return Object(s.jsxs)("div",{class:"row",children:[Object(s.jsxs)("div",{class:"col-6",children:[Object(s.jsxs)("h1",{children:[e.recipe.name," ",Object(s.jsx)("a",{href:e.recipe.link,target:"_blank",children:Object(s.jsx)(k.a,{icon:N.a})})]}),D.a.times(e.recipe.rating,(function(){return Object(s.jsx)("span",{class:"fa fa-star"})}))," Rated ",e.recipe.rating," Stars",Object(s.jsx)("br",{}),Object(s.jsx)("img",{src:e.recipe.image,width:"100%"}),Object(s.jsx)("button",{class:"btn btn-primary",onClick:e.notify,children:"Text Me Ingredients!"})]}),Object(s.jsxs)("div",{class:"col-6",children:[Object(s.jsxs)(I.a,{defaultActiveKey:"0",children:[Object(s.jsxs)(R.a,{children:[Object(s.jsx)(R.a.Header,{children:Object(s.jsx)(I.a.Toggle,{as:U.a,variant:"link",eventKey:"0",children:"Ingredients"})}),Object(s.jsx)(I.a.Collapse,{eventKey:"0",children:Object(s.jsx)(R.a.Body,{children:Object(s.jsx)("table",{class:"table",children:Object(s.jsx)("tbody",{children:e.recipe.ingredients?e.recipe.ingredients.map((function(e){return Object(s.jsxs)("tr",{children:[Object(s.jsxs)("td",{children:[e.quantity," ",e.unit]}),Object(s.jsx)("td",{children:e.name})]})})):Object(s.jsx)("tr",{children:Object(s.jsx)("td",{children:"No Ingredients Found"})})})})})})]}),Object(s.jsxs)(R.a,{children:[Object(s.jsx)(R.a.Header,{children:Object(s.jsx)(I.a.Toggle,{as:U.a,variant:"link",eventKey:"1",children:"Instructions"})}),Object(s.jsx)(I.a.Collapse,{eventKey:"1",children:Object(s.jsx)(R.a.Body,{children:Object(s.jsx)("ol",{children:e.recipe.instructions?e.recipe.instructions.map((function(e){return Object(s.jsx)("li",{children:e})})):Object(s.jsx)("li",{children:"No instructions found!"})})})})]})]}),Object(s.jsx)("p",{children:e.recipe.notes})]})]})},B=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={recipe:{}},s.notify=s.notify.bind(Object(u.a)(s)),s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/api/recipes/"+this.props.match.params.id).then((function(t){e.setState({recipe:t.data})})).catch((function(e){console.log(e)}))}},{key:"notify",value:function(){p.a.post("/api/recipes/text",{recipe:this.state.recipe}).then((function(e){console.log(e.body)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return Object(s.jsx)("div",{children:Object(s.jsx)(q,{recipe:this.state.recipe,notify:this.notify},this.state.recipe._id)})}}]),n}(i.Component),M=n(102),P=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).onChangeName=s.onChangeName.bind(Object(u.a)(s)),s.onChangeLink=s.onChangeLink.bind(Object(u.a)(s)),s.onSubmit=s.onSubmit.bind(Object(u.a)(s)),s.state={name:"",link:"",ingredients:[],instructions:[],time:{},scrapedRecipe:{},image:""},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeLink",value:function(e){this.setState({link:e.target.value}),this.getRecipeFromLink(e.target.value)}},{key:"setIngredient",value:function(){}},{key:"parseIngredient",value:function(e){var t=e.split(" "),n=t.shift();try{if(n=M(n),t.length<2)return{name:t.shift(),quantity:n,unit:null};var s=t.shift();return{name:t.join(" "),quantity:n,unit:s}}catch(i){return t.unshift(n),{name:t.join(" "),quantity:null,unit:null}}}},{key:"getRecipeFromLink",value:function(e){var t=this;p.a.post("/api/recipes/scrape",{link:e}).then((function(e){console.log(e.data);var n=e.data.ingredients.map((function(e){return t.parseIngredient(e)}));console.log(n),t.setState({name:e.data.name,image:e.data.image,ingredients:n,instructions:e.data.instructions,time:e.data.time})}))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={name:this.state.name,link:this.state.link,ingredients:this.state.ingredients,instructions:this.state.instructions,time:this.state.time,rating:0,notes:this.state.notes,image:this.state.image};console.log(t),p.a.post("/api/recipes",t).then((function(e){console.log(e.data),window.location="/"})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Add New Recipe"}),Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Link: "}),Object(s.jsx)("input",{type:"text",required:!0,className:"form-control",value:this.state.link,onChange:this.onChangeLink})]}),this.state.image?Object(s.jsx)("img",{width:"100%",src:this.state.image}):null,Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Recipe "}),Object(s.jsx)("input",{ref:"nameInput",required:!0,className:"form-control",value:this.state.name,onChange:this.onChangeName})]}),this.state.ingredients.length?"Ingredients:":null,Object(s.jsx)("ul",{children:this.state.ingredients.map((function(e){return Object(s.jsxs)("li",{children:[e.name,", ",e.quantity,", ",e.unit]})}))}),this.state.instructions.length?"Instructions:":null,Object(s.jsx)("ul",{children:this.state.instructions.map((function(e){return Object(s.jsx)("li",{children:e})}))}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Create Recipe",className:"btn btn-primary"})})]})]})}}]),n}(i.Component),$=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).onChangeIngredient=s.onChangeIngredient.bind(Object(u.a)(s)),s.onChangeInstruction=s.onChangeInstruction.bind(Object(u.a)(s)),s.onChangeNote=s.onChangeNote.bind(Object(u.a)(s)),s.submit=s.submit.bind(Object(u.a)(s)),s.state={recipe:{},$push:[],$set:{}},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;p.a.get("/api/recipes/"+this.props.match.params.id).then((function(t){e.setState({recipe:t.data})})).catch((function(e){console.log(e)}))}},{key:"onChangeIngredient",value:function(e,t,n){var s=this.state.recipe.ingredients[e];s[n]=t.target.value;var i=this.state.$push;i.push(s),this.setState({$push:i})}},{key:"onChangeInstruction",value:function(e,t){var n=this.state.recipe.ingredients[e],s=this.state.$push;s.push(n),this.setState({$push:s})}},{key:"onChangeNote",value:function(e){var t=this.state.$set;t.push({note:e.target.value}),this.setState({$set:t})}},{key:"submit",value:function(){p.a.put("/api/recipes",this.state.recipe).then((function(e){console.log(e.data)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{children:[Object(s.jsx)("h3",{children:"Recipe"}),Object(s.jsx)("h1",{children:this.state.recipe.name}),Object(s.jsx)("p",{children:this.state.recipe.link}),D.a.times(this.state.recipe.rating,(function(){return Object(s.jsx)("span",{class:"fa fa-star"})}))," Rated ",this.state.recipe.rating," Stars",Object(s.jsx)("br",{}),Object(s.jsx)("div",{class:"card",children:Object(s.jsxs)("div",{class:"card-body",children:[Object(s.jsx)("h5",{class:"card-title",children:"Ingredients"}),this.state.recipe.ingredients?this.state.recipe.ingredients.map((function(t,n){return Object(s.jsxs)("form",{class:"form-inline",children:[Object(s.jsxs)("label",{for:"email",children:[n+1," Name"]}),Object(s.jsx)("input",{type:"text",class:"form-control",placeholder:t.name,onChange:function(t){e.onChangeIngredient(n,t,"name")}}),Object(s.jsx)("label",{for:"pwd",children:"Quantity"}),Object(s.jsx)("input",{type:"text",class:"form-control",placeholder:t.quantity,onChange:function(t){e.onChangeIngredient(n,t,"quantity")}}),Object(s.jsx)("label",{for:"pwd",children:"Unit"}),Object(s.jsx)("input",{type:"text",class:"form-control",placeholder:t.unit,onChange:function(t){e.onChangeIngredient(n,t,"unit")}})]})})):Object(s.jsx)("p",{children:"No Ingredients Found"})]})}),Object(s.jsx)("div",{class:"card",children:Object(s.jsxs)("div",{class:"card-body",children:[Object(s.jsx)("h5",{class:"card-title",children:"Instructions"}),this.state.recipe.instructions?this.state.recipe.instructions.map((function(t,n){return Object(s.jsxs)("div",{class:"form-group",children:[Object(s.jsxs)("label",{children:["Instruction ",n+1]}),Object(s.jsx)("textarea",{class:"form-control",value:t,id:"instruction"+n,onChange:function(t){e.onChangeInstruction(n,t)}})]})})):Object(s.jsx)("p",{children:"No instructions found!"})]})}),Object(s.jsxs)("div",{class:"form-group",children:[Object(s.jsx)("label",{children:"Notes"}),Object(s.jsx)("textarea",{class:"form-control",value:this.state.note,id:"notes",onChange:this.onChangeNote})]}),Object(s.jsx)("button",{class:"btn btn-primary",onClick:this.submit,children:"Submit"})]})}}]),n}(i.Component),A=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(o.a)(this,n),s=t.call(this,e),console.log("Navbar Says: "+e.loggedIn),s.logout=s.logout.bind(Object(u.a)(s)),s}return Object(l.a)(n,[{key:"logout",value:function(e){var t=this;e.preventDefault(),console.log("logging out"),p.a.post("/api/sessions/logout").then((function(e){200===e.status&&(t.props.updateUser({loggedIn:!1,username:null}),window.location="/")})).catch((function(e){console.log(e),console.log("Logout error")}))}},{key:"render",value:function(){return Object(s.jsxs)("nav",{class:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(s.jsx)("a",{class:"navbar-brand",href:"/",children:"Recipe Brain"}),Object(s.jsxs)("div",{id:"navbarNav",children:[this.props.loggedIn?Object(s.jsxs)("div",{children:[" Hey, ",this.props.username," "]}):null,this.props.loggedIn?Object(s.jsx)("ul",{class:"navbar-nav",children:Object(s.jsx)("li",{class:"nav-item",children:Object(s.jsxs)("a",{class:"nav-link",onClick:this.logout,children:[Object(s.jsx)("span",{class:"glyphicon glyphicon-user"}),"Logout"]})})}):Object(s.jsxs)("ul",{class:"navbar-nav",children:[Object(s.jsx)("li",{class:"nav-item",children:Object(s.jsxs)("a",{class:"nav-link",href:"/signup",children:[Object(s.jsx)("span",{class:"glyphicon glyphicon-user"}),"Sign Up"]})}),Object(s.jsx)("li",{class:"nav-item",children:Object(s.jsxs)("a",{class:"nav-link",href:"/login",children:[Object(s.jsx)("span",{class:"glyphicon glyphicon-log-in"}),"Login"]})})]})]})]})}}]),n}(i.Component),F=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).onChangeUserName=s.onChangeUserName.bind(Object(u.a)(s)),s.onChangePassword=s.onChangePassword.bind(Object(u.a)(s)),s.onSubmit=s.onSubmit.bind(Object(u.a)(s)),s.state={username:"",email:"",password:"",countryCode:"",phoneNumber:""},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"onChangeUserName",value:function(e){this.setState({username:e.target.value})}},{key:"onChangePassword",value:function(e){this.setState({password:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,password:this.state.password};console.log(t),p.a.post("/api/sessions/login",t).then((function(e){console.log(e.data),window.location="/"})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Username: "}),Object(s.jsx)("input",{type:"text",name:"username",className:"form-control",value:this.state.username,onChange:this.onChangeUserName})]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Password: "}),Object(s.jsx)("input",{type:"password",name:"password",className:"form-control",value:this.state.password,onChange:this.onChangePassword})]}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary"})})]})})}}]),n}(i.Component),T=n(26),_=n(63),K=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"sanitizePhoneNumber",value:function(e){return e.replace(/\D/g,"")}},{key:"render",value:function(){var e=this;return Object(s.jsx)("div",{children:Object(s.jsx)(_.a,{initialValues:{username:"",email:"",password:"",phoneNumber:""},validate:function(t){var n={};return t.username||(n.username="Required"),t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(t.email)||(n.email="Invalid email address"):n.email="Required",t.phoneNumber?e.sanitizePhoneNumber(t.phoneNumber).length>10&&(n.phoneNumber="Too Long"):n.phoneNumber="Required",n},onSubmit:function(e){var t=Object(T.a)({},e);t.countryCode=1,console.log(t),p.a.post("/api/users",t).then((function(e){console.log(e.data),window.location="/"})).catch((function(e){return console.log(e)}))},children:function(t){var n=t.values,i=t.errors,a=t.touched,c=t.handleChange,r=t.handleBlur,o=t.handleSubmit,l=t.isSubmitting;return Object(s.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Username: "}),Object(s.jsx)("input",{type:"text",name:"username",className:"form-control",onChange:c,onBlur:r,value:n.username}),i.username&&a.username&&i.username]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Email: "}),Object(s.jsx)("input",{type:"email",name:"email",className:"form-control",onChange:c,onBlur:r,value:n.email}),i.email&&a.email&&i.email]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Password: "}),Object(s.jsx)("input",{type:"password",name:"password",className:"form-control",onChange:c,onBlur:r,value:n.password}),i.password&&a.password&&i.password]}),Object(s.jsxs)("div",{className:"form-group",children:[Object(s.jsx)("label",{children:"Phone Number (USA Only): "}),Object(s.jsx)("input",{type:"text",name:"phoneNumber",className:"form-control",onChange:c,onBlur:r,value:n.phone}),i.phoneNumber&&a.phoneNumber&&i.phoneNumber]}),Object(s.jsx)("div",{className:"form-group",children:Object(s.jsx)("button",{className:"btn btn-primary",type:"submit",onClick:o,disabled:l,children:"Submit"})})]})}})})}}]),n}(i.Component),G=(n(103),n(7));n(65);function H(){return Object(s.jsxs)("div",{class:"jumbotron",children:[Object(s.jsx)("h1",{class:"display-4",children:"Welcome to Recipe Brain"}),Object(s.jsx)("p",{class:"lead",children:"Import, search, manage, share"})]})}var V=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={loggedIn:!1,username:null},e.getUser=e.getUser.bind(Object(u.a)(e)),e.componentDidMount=e.componentDidMount.bind(Object(u.a)(e)),e.updateUser=e.updateUser.bind(Object(u.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"updateUser",value:function(e){this.setState(e)}},{key:"getUser",value:function(){var e=this;p.a.get("/api/users").then((function(t){console.log("Get user response: "),console.log(t.data),t.data.user?(console.log("Get User: There is a user saved in the server session: "),e.setState({loggedIn:!0,username:t.data.user.username})):(console.log("Get user: no user"),e.setState({loggedIn:!1,username:null}))}))}},{key:"render",value:function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)(A,{loggedIn:this.state.loggedIn,username:this.state.username,updateUser:this.updateUser}),Object(s.jsxs)("div",{class:"grid-container",children:[Object(s.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}),Object(s.jsx)("div",{id:"left-sidebar"}),Object(s.jsx)("div",{id:"main",children:Object(s.jsx)(j.a,{id:"router",history:f,children:Object(s.jsxs)("div",{className:"Container",children:[Object(s.jsx)("br",{}),Object(s.jsxs)(G.c,{children:[Object(s.jsx)(G.a,{path:"/",exact:!0,component:S,children:this.state.loggedIn?Object(s.jsx)(S,{}):Object(s.jsx)(H,{})}),Object(s.jsx)(G.a,{path:"/recipes/:id",exact:!0,component:B}),Object(s.jsx)(G.a,{path:"/edit/:id",exact:!0,component:$}),Object(s.jsx)(G.a,{path:"/add",exact:!0,component:P}),Object(s.jsx)(G.a,{path:"/login",exact:!0,component:F}),Object(s.jsx)(G.a,{path:"/signup",exact:!0,component:K})]})]})})}),Object(s.jsx)("div",{id:"right-sidebar"})]})]})}}]),n}(i.Component),Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,109)).then((function(t){var n=t.getCLS,s=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),s(e),i(e),a(e),c(e)}))};r.a.render(Object(s.jsxs)(a.a.StrictMode,{children:[Object(s.jsx)("link",{rel:"stylesheet",href:"/bower/fontawesome/css/font-awesome.min.css"}),Object(s.jsx)(V,{})]}),document.getElementById("root")),Z()},72:function(e,t,n){},73:function(e,t,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.aa4dd8c7.chunk.js.map